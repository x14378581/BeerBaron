<!DOCTYPE html>
<html><head>
    <title> BEER BARON PAGE </title>
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    
      <script>
        function hideResponse(){
            /*
                this is wqhere we need to hide the response tgext....
            */
            //alert("The hideResponse function ghas been activated");
            document.getElementById("response").style.display = "none";
            document.getElementById("hideRes").style.display = "none";
         }
      </script>
    <script>
/*
    This is a testiong function that sends an ajax request to the server and shows a 
    loading dialogue
*/
    function getinfo(){
    
       //alert("the function getinfo has been csalled");
       
        $.ajax({
             type:"post",
             url: 'beerbaron.php',
             success: function(data) {
                 //alert("the ajax function has received");
                document.getElementById("output").innerHTML = "";
            }
        });
    }
    
    
    
</script>
<script>
        function loadStats(){
             $.ajax({
             url: 'stats.php'})
            .done (function(data) {
            $('#stats').html(data);
             alert( "Load was performed." );
             });
         }
        </script>
    <style type="text/css">
      .hidden {
        display: none;
      }
    </style>
    <script>
        var beer = 0;
        var spirit = 0;
        var cider = 0;
        var wine = 0;


        function makeSpirits() {
            spirit = 3;
            //alert("You have made "+spirit+" spirits");
            //window.location.href = "beerbaron.php?spirit=" + spirit; // this sends the variable to the php file.
            $.ajax({
             type:"post",
             data:{spirit: spirit},
             url: 'beerbaron.php',
             success: function(data) {
                 alert("the ajax function has received " + data);
                document.getElementById("checker2").innerHTML = "<h1>"+data+"</h1>";
            }
            
            });
            
        }
        

        function makeBeer() {
            //alert("The make beer function has been clicked");
            var d = new Date();
            var clickTime = d.getTime();
            var finishTime = clickTime + 10000;
            //alert(clickTime+", "+finishTime);
            
            beer = 10;
        
    //        window.location.href = "beerbaron.php?beer=" + beer; // this sends the variable to the php file.
            $.ajax({
             type:"post",
             data:{beer: beer},
             url: 'beerbaron.php',
             success: function(data) {
                 //alert("the ajax function has received " + data);
                document.getElementById("checker2").innerHTML = "<h1>"+data+"</h1>";
            }
            
            });
            
        }


        function makeCider() {
            cider = 10;
            //alert("You have made "+cider+" ciders");
            //window.location.href = "beerbaron.php?cider=" + cider; // this sends the variable to the php file.
        }

        function makeWine() {
            wine = 10;
            //alert("You have made "+wine+" wines");
            //window.location.href = "beerbaron.php?wine=" + wine; // this sends the variable to the php file.
        }
    </script>
    
    <script>
        function checkStats() {
            alert("the function checkstats has been called");
            var statsData = "<table><tr><th> Beer Baron </th><th> Statistics </th></tr>"
            
            for(var i=0;i < statsData.length; i++){
                    
                var tmpData = statsData[i];
                    statsData = statsData + "<table><tr><td>"+tmpData[0]+"</td></tr>"+"<tr><td>"+tmpData[1]+"</td></tr>"+"<tr><td>"+tmpData[2]+"</td></tr>"+"<tr><td>"+tmpData[3]+"</td></tr>";
                    
                    
                              } 
                    statsData = statsData + "</table>";
                    document.getElementById("statsInfo").innerHTML = statsData
                    document.getElementById("statsInfo").style.display = "inline";
                    
                    
                    /*
                     /* 
    <script>
        function checkStats() {
            alert("the function checkstats has been called");
            var statsData = "<table><tr><th> Beer Baron </th><th> Statistics </th></tr>"
            
            for(var i=0;i < statsData.length; i++){
                    
                var tmpData = statsData[i];
                    statsData = statsData + "<table><tr><td>"+tmpData[0]+"</td></tr>"+"<tr><td>"+tmpData[1]+"</td></tr>"+"<tr><td>"+tmpData[2]+"</td></tr>"+"<tr><td>"+tmpData[3]+"</td></tr>";
                    
                    
                              } 
                    statsData = statsData + "</table>";
                    document.getElementById("statsInfo").innerHTML = statsData
                    document.getElementById("statsInfo").style.display = "inline";
                    
                    
                    
                This file is were we need to change a html element with the contents of the query after being executed...
                
                first we create an empty element in html and we make it invisible..
                
                    --> <div id="statsInfo" style="display:none"></div> ---> This piece of the puzzel goes into your HTML part of the page where you would like to display it...remember its invisible at the moment.
                    
                Next we get the data using ajax, see below. This should return a multidimensional array but this depends on 
                what query is being run in the PHP side of things.
                
                If we wanted to create a table we could do the following:
                
                Everything else goes into the Javascript function...
                
                
                var statsData = "<table><tr><th>heading1</th><th>heading2</th></tr>";   // this is just a string at the moment.
                
                if we have a loop for multiple entries in the table defined above it would look like this....
                
                each time the loop executes below another row is added to the table string that we are creating....
                
                for(var i=0;i < data.length;i++){
                    
                    var tmpData = data[i];
                    statsData = statsData + "<tr><td>"+tmpData[0]+"</td>"....continue with the elements from the appropriate indexes...</tr>";
    
                    
                }
                
                Once we have exited the loop we need to finish the table element.
                
                statsData = statsData + "</table>";
                
                Now this string when executed as a innerHTML will be evaluated by a browser as html. We already have our empty element5 defined and just need to stick this inside it.
                
                document.getElementById("statsInfo").innerHTML = statsData.
                document.getElementById("statsInfo").style.display= "inline";
            */
            /*
            $.ajax({
                    url: "stats.php",
                    type: "POST",
                    data: {beer: beer,
                           spirit: spirit},
                     .done (function(data)) {
                        alert("the data coming back is : "+data);
                        var stats = JSON.parse(data);
                        $('#statsInfo').html(data);
                     });
                        
                  
                    }
                });
            }
            */
        /*
             $.ajax({
                    url: "stats.php",
                    type: "POST",
                    data: {beer: beer,
                           spirits: spirits,
                           cider: cider,
                       //    wine: wine,
                       //    dollars: dollars
                    },
                    success: function(data) {
                        alert("the data coming back is : "+data);
                        var stats = JSON.parse(data);
                        
                    
                        
               
                    }
                });
            }
           */ 
    </script>
    </script>
</head>



<body>
<!-- The Modal -->

    <div id="nav">
    <nav class="navbar navbar-defaultb navbar-static affix-top"  role="navigation">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="container">


      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="fourbyfour" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
        </ul>
        <ul class="nav navbar-nav navbar-right1"  class="fourbyfour" style="width:100%"  style="color:#FFBF00", >
          <li id="b"><a href="#" onclick="getinfo(); document.getElementById('hidden').style.display = 'block';setTimeout(makeBeer, 1000)"><center>Make Beer</center></a></li>
          <li id="a"><a href="#" onclick="getinfo(); document.getElementById('hidden').style.display = 'block';setTimeout(makeSpirits, 1000)"><center>Make Spirits</center></a></li>
          <li id="b"><a href="#" onclick="getinfo(); document.getElementById('hidden').style.display = 'block';setTimeout(makeWine, 1000)"><center>Make Wine</center></a></li>
          <li id="a"><a href="#" onclick="getinfo(); document.getElementById('hidden').style.display = 'block';setTimeout(makeCider, 1000)"><center>Make Cider</center></a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div>
    </nav>
  </div>
  


<div id="id01" class="modal">
  
  <form class="modal-content animate" action="action_page.php">
    <div class="imgcontainer">
      <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>

    </div>

    <div class="container">
      <label><b>Username</b></label>
      <input type="text" placeholder="Enter Username" name="uname" required>

      <label><b>Password</b></label>
      <input type="password" placeholder="Enter Password" name="psw" required>
        
      <button type="submit">Login</button>
      <input type="checkbox" checked="checked"> Remember me
    </div>

    <div class="end" style="background-color:#f1f1f1">
      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
      <span class="psw">Forgot <a href="#">password?</a></span>
    </div>
  </form>
</div>


<div id="chatBox" class="modal">
  
  <form class="modal-content animate">
    <div class="imgcontainer" id='chatSpan'>
      <span onclick="document.getElementById('chatBox').style.display='none'" class="close" title="Close Modal">&times;</span>
      
    </div>

    <div class="container">
      <label><b>Message</b></label>
      <input type="textarea" placeholder="Enter your message" name="message"/>

      <label ></label>
        
        <button type="button">Send</button>
      &nbsp;&nbsp;&nbsp;&nbsp;
        <button type="button">Sell Beer</button>
      </div>
    
      <div id="statsInfo" style="display:none"> 
        <button type = button > Check Beer Baron Player Stats</button>
        
      </div>
      
    
  </form>
</div>





 
  
  
  <div id="container">
 <div id="output"><img id="hidden" class="hidden" src="progress.gif"></div> </div>
 
 
 
 
 
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      $(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
});

      $(function() {
  //navbar affix
  $('#nav').affix({
    offset: {
      top: $('header').height()
    }
  });
});

      $('#nav .navbar-nav li>a').click(function(){
  var link = $(this).attr('href');
  var posi = $(link).offset().top+20;
  $('body,html').animate({scrollTop:posi},700);
})


      $( document ).ready(function() {
    $("[rel='tooltip']").tooltip();    
 
    $('.thumbnail').hover(
        function(){
            $(this).find('.caption').fadeIn(250);
        },
        function(){
            $(this).find('.caption').fadeOut(205);
        }
    ); 
});
    </script>
    <script>
// Get the modal
var modal = document.getElementById('id01');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

var chatBox = document.getElementById('chatBox');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == chatBox) {
        chatBox.style.display = "none";
    }
}

</script>

<script>
// Script for geolocation. HTML5 GeoLocation API
function getUserLocation(){
  
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    alert("Cannot find location");
  }
}
function showPosition(position){
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;
  
  
  
  alert("Latitude: "+latitude+"  Longitude: "+longitude);
  $('.dropdown-menu').children().empty();
 /* var chatList = [
    {"username":"John", "lastSeen":"2 mins ago"}, 
    {"username":"Alan", "lastSeen":"5 mins ago"}, 
    {"username":"Smith", "lastSeen":"7 mins ago"}
];*/
/*for(var i=0; i<chatList.length; i++){
        var element = "<li><a id='userDetails"+i+"' onclick='startChat(this);'>"+chatList[i].username+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+chatList[i].lastSeen+"</a></li>";
        $('.dropdown-menu').append(element);
}*/


  

//$('.dropdown-menu').children().empty();

$.ajax({
  url: "./pages/Location.php",
  type: "POST",
  data: {latitude: latitude, longitude: longitude},
    success: function parseData(chatList){
      for(var i=0; i<chatList.length; i++){
        var element = "<li><a id='userDetails"+i+"' onclick='startChat(this);'>"+chatList[i].username+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+chatList[i].lastSeen+"</a></li>";
        $('.dropdown-menu').append(element);
      }
    }
});
  
}
function startChat(element){
  $('#chatBox').show();
  //$('#chatSpan').empty();
  $('#chatSpan').append("<span>"+$(element).text()+"</span>");
  
}
</script>
    <!--  <form>
         <input type="button"  value = "Display Message" onclick="getData('testData.txt','targetDiv')">
         
         </form>-->
    <div id="headerb" >
       <h1>Beerbaron</h1>
    </div>
    <div id="imgb">
             <img src="..//img/Beerbrews.gif" alt="HTML5 Icon"  style="width:53%;height:53%;">
         </div>
     <div>
         
     </div>
      <div id="Input_form">
          <form>
              <select id = "item">
                  <option value="Beer">Beer</option>
                  <option value="Spirit">Spirits</option>
                  <!--<option value="Wine">Wine</option>
                  <option value="Cider">Cider</option>-->
              </select><br/>
            <label>Amount:</label><br/>
            <input id = "amount" type="number" name="amount" min="1"/>
            <br/>
            <label>Price:</label><br/>
            <input id="price" type="number" name="price" min="1"/>
            <br/>
             
          </form>
      </div>


         <div id="player" >
         </div>
         
         <div id = "checker" >
             
         </div>
         
        <div id ="checker2">
         
             This message is inside checker 2
         </div>
         
        
       <div id = "response">
           
       </div>
     <!--  <button  id="hideRes" onclick="hideResponse();" style="display:inline">Hide Response</button> -->

     
     
     
     <!--lukes work-->
 <div id="br" >
    <button type="button"  id="bt"style="background-color:#ffa900" onclick="loadStats()">Stats</button>
        <div id = "stats">
            
            
        </div>
 </div>
    <script>
         function loadDoc1(){
             $.ajax({
             url: 'test.php'})
            .done (function(data) {
            $('#player').html(data);
             });
         }
         
function myFunction2(elem){
             //alert("the element that is being refer5enced is : "+elem);
             var item = document.getElementById("item").value;
             var amount = document.getElementById("amount").value;
             var price = document.getElementById("price").value;
            // alert(elem+" "+item+" "+amount+" "+price);
             //window.location.href = "sellFunction.php?elem=" + elem + "&item=" + item + "&amount=" + amount + "&price=" + price;
             
             
             
                $.ajax({
                    
                    
                    type: "POST",
                    url: 'sellFunction.php',
                    data: {elem: elem, item: item, amount: amount, price: price}
                }).done(function(msg){
                  $('#checker2').html(msg);
                    
                    //alert(msg);
            
                });

         }
        
setInterval(function() {
 //alert("Lets do it!!")
 request();
 response();
 //response1();
 loadDoc1();
 
}, 3000 /*1000 * 60 * 2*/); // where X is your every X minutes

function request(){

                $.ajax({
                    url:"beerChecker.php",
                })
                .done(function(msg){
                $('#checker').html(msg);
                    
                   // alert(msg);
            
                });
                //alert(msg)
            }

function response(){
                 $.ajax({
                    url:"beerResponse.php",
                })
                .done(function(msg){
                $('#response').html(msg);
            
                });
                //alert(msg)
}

/*function response1(){
                 $.ajax({
                    url:"copResponse.php",
                })
                .done(function(msg){
                $('#response').html(msg);
            
                });
                //alert(msg)
}*/
    
 
            
function myAccept($Username, $buyer, $item, $amount, $price){
    //alert($buyer);
    
                $.ajax({
                    
                    
                    type: "POST",
                    url: 'beerTransaction.php',
                    data: {Username: $Username, item: $item, amount: $amount, price: $price , buyer: $buyer, }
                }).done(function(msg){
                    //alert($buyer);
                $('#checker2').html(msg);
                });
}

function myDeny($Username, $buyer){
    //alert($buyer);
    
                $.ajax({
                    
                    
                    type: "POST",
                    url: 'checkerDeny.php',
                    data: {Username: $Username, buyer: $buyer, }
                }).done(function(msg){
                    //alert($buyer);
                $('#checker2').html(msg);
                });
}

function myOkay($Username, $buyer){
    //alert($buyer);
    
                $.ajax({
                    
                    
                    type: "POST",
                    url: 'okay.php',
                    data: {Username: $Username, buyer: $buyer, }
                });
              
}
         
         
</script>
   
    
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</html>


